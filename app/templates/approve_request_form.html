<div class="row">
    <div class="col-md-12">
        <p>
            This form allows you to approve an allocation request, enter the quotas for the tenant to be created.
        </p>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <span class="alert-info"> <strong>Info: </strong></span>Required fields are marked with an
        <i class="glyphicon glyphicon-asterisk text-primary"></i>
        sign
    </div>
</div>
<hr/>
<form name="approve_form" ng-submit="vm.approve_alloc()" novalidate>

    <div class="row">
        <div class="col-md-6">
            <label for="id-project_identifier">
                Project Identifier <i class="glyphicon glyphicon-asterisk text-primary"></i>
            </label>

            <span ng-controller="PopupController">
            <span ng-click="showHelp()" class="help-icon-sp"><img class="help-icon" src="images/help.png"></span>
            <modal title="{{ help.project_identifier.title }}" visible="showModal">
                <span ng-bind-html="help.project_identifier.text"></span>
            </modal>
        </span>

            <div class="form-group">
                <input type="text" name="project_description" id="id-project_identifier" class="form-control"
                       ng-model="vm.alloc.project_ids[0].identifier" readonly="readonly"/>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <label for="id-project_description">
                Project Allocation Title <i class="glyphicon glyphicon-asterisk text-primary"></i>
            </label>

            <span ng-controller="PopupController">
            <span ng-click="showHelp()" class="help-icon-sp"><img class="help-icon" src="images/help.png"></span>
            <modal title="{{ help.project_description.title }}" visible="showModal">
                <span ng-bind-html="help.project_description.text"></span>
            </modal>
        </span>

            <div class="form-group">
                <input type="text" name="project_description" id="id-project_description" class="form-control"
                       ng-model="vm.alloc.description" readonly="readonly"/>
            </div>
        </div>
    </div>


    <div>
        <div class="row">
            <div class="col-md-5">
                <table>
                    <tr>
                        <td>
                            <div class="form-group">
                                <label for="id-start_date">
                                    Start Date
                                </label>

                                <div class="form-group">
                                    <input type="text" class="form-control" id="id-start_date" readonly="readonly"
                                           ng-model="vm.alloc.requests[0].start_date">
                                </div>
                            </div>
                        </td>
                        <td>&nbsp;&nbsp; <i class="fa fa-long-arrow-right"></i> &nbsp;&nbsp;</td>
                        <td>
                            <div class="form-group">
                                <label for="id-end_date">
                                    End Date
                                </label>

                                <div class="form-group">
                                    <input type="text" class="form-control" id="id-end_date" readonly="readonly"
                                           ng-model="vm.alloc.requests[0].end_date">
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="sub_title">
                    <span class="sub_title"><i class="fa fa-desktop"></i> Compute Resources </span>
                </div>
                <div>
                    <table class="data_tab">
                        <thead>
                        <tr>
                            <th width="30%">&nbsp;</th>
                            <th width="30%">Requested</th>
                            <th width="40%">Approved</th>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="form-group">
                    <table width="100%">
                        <tr>
                            <td>
                                <table class="data_tab">
                                    <tr>
                                        <td colspan="3">
                                            {{vm.alloc.requests[0].compute_requests[0].compute_product.name}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th width="30%">Virtual Machine Instances</th>
                                        <td width="30%">{{vm.alloc.requests[0].compute_requests[0].instances}}</td>
                                        <td width="40%">
                                            <input type="text" class="form-control" id="approved_instances"
                                                   ng-model="vm.alloc.requests[0].compute_requests[0].approved_instances"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Core</th>
                                        <td>{{vm.alloc.requests[0].compute_requests[0].cores}}</td>
                                        <td>
                                            <input type="text" class="form-control" id="approved_cores"
                                                   ng-model="vm.alloc.requests[0].compute_requests[0].approved_cores"
                                                   ng-change="vm.update_core_hours()" required/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Core Hours</th>
                                        <td>{{vm.alloc.requests[0].compute_requests[0].core_hours}}</td>
                                        <td>
                                            <input type="text" class="form-control" id="approved_core_hours"
                                                   ng-model="vm.alloc.requests[0].compute_requests[0].approved_core_hours"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="sub_title">
                    <span class="sub_title"><i class="fa fa-database"></i> Storage Resources </span>
                </div>
                <div>
                    <table class="data_tab">
                        <thead>
                        <tr>
                            <th width="30%">&nbsp;</th>
                            <th width="30%">Requested</th>
                            <th width="40%">Approved</th>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="form-group">
                    <table width="100%">
                        <tr ng-repeat="storage in vm.alloc.requests[0].storage_requests">
                            <td>
                                <table class="data_tab">
                                    <tr>
                                        <td colspan="3">{{storage.storage_product.name}}</td>
                                    </tr>
                                    <tr>
                                        <th width="30%">Quota</th>
                                        <td width="30%">{{storage.quota}}</td>
                                        <td width="40%">
                                            <input type="text" class="form-control" id="approved_quota"
                                                   ng-model="storage.approved_quota"/>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <label for="id-approval_notes">
                    Comment
                </label>
                <span ng-controller="PopupController">
                <span ng-click="showHelp()" class="help-icon-sp"><img class="help-icon" src="images/help.png"></span>
                <modal title="{{ help.approve_comment.title }}" visible="showModal">
                    <span ng-bind-html="help.approve_comment.text"></span>
                </modal>
            </span>

                <div class="form-group">
                <textarea name="approval_notes" id="id-approval_notes"
                          ng-model="vm.alloc.requests[0].approval_notes" class="form-control"
                          rows="5" style="height:120px; width:450px"></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div>
                <button type="submit" class="btn bg-primary">Submit</button>
            </div>
        </div>
    </div>
</form>